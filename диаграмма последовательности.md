@startuml 
title подписка 
 
actor Авторизованный_юзер as АЮ 
participant Frontend as клиент 
participant Backend as сервер 
participant приложение_с_кошельком as приложение 
participant Смарт_контракт as СК 
 
АЮ o-клиентоткрыть информацию о канале 
клиент-серверЗапрос инфу о канале 
сервер--клиентинфа о канале 
клиент--АЮОтобразить инфу 
АЮ -клиент“Купить доступ” 
клиент--АЮокно с информацией о сумме и валюте 
АЮ-клиентвыбор валюты и согласие 
клиент- приложениезапрос на списание средств 
приложение--клиентподтверждение операции 
клиент--АЮОкно подтверждения операции 
АЮ -клиентПодтверждение 
клиент-СК транзакция+id канала, данные о пользователе (никнейм) 
СК-СКпроверка условий 
СК-приложениесписание суммы 
 
alt Все ок 
СК--сервер Транзакция совершена 
сервер-сервер открытие доступа юзеру
сервер--клиент оплата прошла успешно 
клиент--АЮ сообщение об успешной транзакции 
else Не ок 
СК--сервер Транзакция отклонена 
сервер--клиент оплата не прошла 
клиент--АЮ сообщение о неуспешной транзакции 
end 
  
@enduml



